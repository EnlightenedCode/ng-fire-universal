<nav
  [class.expanded]="nav.isHeaderMenuExpanded"
  [class.offline]="platform.isBrowser() && !platform.isOnline()">
  <div class="top">
    <a
      class="logo"
      routerLink="/"
      (click)="nav.collapseHeader()">ng-fire-universal</a>
    <div
      class="menu-toggle"
      [class.active]="nav.isHeaderMenuExpanded"
      (click)="nav.toggleMenu($event)">
      <i class="fa fa-bars"></i>
    </div>
  </div>

  <!-- Logged-in -->
  <div
    class="menu-container"
    [class.expanded]="nav.isHeaderMenuExpanded"
    *ngIf="auth.user | async as user; else isStatic">
    <ul
      class="menu logged-in"
      [class.expanded]="nav.isHeaderMenuExpanded || nav.isHeaderAccountMenuExpanded">
      <li class="menu-item">
        <a
          class="menu-link"
          href="https://github.com/jrodl3r/ng-fire-universal">
          <i class="fab fa-github mr-2"></i> GitHub
        </a>
      </li>
      <li
        class="menu-item dropdown"
        *ngIf="user">
        <div
          class="menu-link dropdown-toggle"
          (click)="nav.toggleAccountMenu($event)"
          [class.expanded]="nav.isHeaderAccountMenuExpanded">
          <span class="avatar">
            <img
              [class.inactive]="!user.active"
              [src]="user.photoURL || '/assets/img/user.png'">
          </span>
        </div>
        <div
          class="dropdown-menu"
          [class.expanded]="nav.isHeaderAccountMenuExpanded">
          <a
            class="dropdown-item"
            routerLink="/me"
            routerLinkActive="active"
            (click)="nav.collapseHeader()">My Account</a>
          <a
            class="dropdown-item"
            routerLink="/admin"
            routerLinkActive="active"
            (click)="nav.collapseHeader()"
            *ngIf="auth.isAdmin">Admin</a>
          <div class="dropdown-divider"></div>
          <a
            href="#"
            class="dropdown-item sign-out"
            (click)="signOut()">Sign Out</a>
        </div>
      </li>
    </ul>
  </div>

  <!-- Logged-out / initial render (server-side) -->
  <ng-template #isStatic>
    <ul
      class="menu"
      [class.expanded]="nav.isHeaderMenuExpanded || nav.isHeaderAccountMenuExpanded"
      *ngIf="!(auth.isLoading | async)">
      <li class="menu-item">
        <a
          class="menu-link"
          href="https://github.com/jrodl3r/ng-fire-universal"
          (click)="nav.collapseHeader()">
          <i class="fab fa-github mr-2"></i> GitHub
        </a>
      </li>
      <li class="menu-item">
        <a
          class="menu-link"
          routerLink="/signup"
          routerLinkActive="active"
          (click)="nav.collapseHeader()">
          <i class="fas fa-fire mr-2"></i> Sign Up
        </a>
      </li>
      <li class="menu-item">
        <a
          class="menu-link"
          routerLink="/login"
          routerLinkActive="active"
          (click)="nav.collapseHeader()">
          <i class="fas fa-sign-in-alt mr-2"></i> Login
        </a>
      </li>
    </ul>
  </ng-template>
</nav>

<!-- Offline / PWA -->
<div
  class="offline-warning"
  *ngIf="platform.isBrowser() && !platform.isOnline()">
  <div class="container">
    <span>
      <i class="fa fa-warning mr-2"></i>
      Offline / Connection Lost
    </span>
  </div>
</div>
